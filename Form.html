<!doctype html>
<html lang="en">
 <head>
  <title>Feedback</title>
  <style>
    label {	float: left;
			width: 150px;}
      #container{
          width: 700px;
          margin: auto;
          background-color: beige;
      } 
      main{
          padding: 50px;
      }
  </style>
 </head>
 <body>
 <div id="container">
	 
	 <main>
	 <h2>Feeback</h2>
	 <h3>Love something? Hate something? Let us know!</h3>
		 Note : Fields marked with an asterisk(*) are mandatory
		 <br><br>
		 <form id="myForm">
			<label>Title*:</label>
			<input type="radio" name="title" id="miss" value="Miss" required="required"/>Miss
			<input type="radio" name="title" id="mr" value="Mr" required="required"/>Mr.
			<input type="radio" name="title" id="mrs" value="Mrs" required="required"/>Mrs.
			<br><br>
			<label for="firstName">First Name*:</label>
			<input type="text" name="firstName" id="firstName" placeholder="First Name" />	
			<br><br>
			<div id="error_firstName" style="display: none; color: red;">
                Invalid First Name, Please enter valid first name
                <br><br>
            </div>

			<label for="lastName">Last Name*:</label>
			<input type="text" name="lastName" id="lastName" placeholder="Last Name" />
			<br><br>
			<div id="error_lastName" style="display: none; color:red;">
				Invalid Last Name, Please enter valid last name
			</div>
			

			<label for="emailId">Email Id*:</label>
			<input type="text" name="emailId" id="emailId" placeholder="yourname@domain.com" />
			<br><br>
			<div id="error_emailId" style="display: none; color: red;">
                Invalid Email address, Please enter valid @northeastern.edu email address
                <br><br>
            </div>


			<label for="phoneNumber">Phone Number*:</label>
			<input type="text" name="phoneNumber" id="phoneNumber" placeholder="xxx-xxx-xxxx" />
			<br><br>
			<div id="error_phoneNumber" style="display: none; color: red;">
                Invalid phone number, Please enter valid phone number in xxx-xxx-xxxx format
                <br><br>
            </div>


			<label for="streetAddress1">Street Address 1*:</label>
			<input type="text" name="streetAddress1" id="streetAddress1" placeholder="address" />
			<br><br>
            <div id = "error_Address1" style="display: none; color:red;">
                Invalid address, Please enter a valid address.
            </div>

			<label for="streetAddress2">Street Address 2:</label>
			<input type="text" name="streetAddress2" id="streetAddress2" placeholder="address" />
			<br><br>

			<label for="city">City*:</label>
			<input type="text" name="city" id="city" placeholder="city" />
			<br><br>
            <div id = "error_city" style="display: none; color:red;">
                Invalid city, Please enter a valid city.
            </div>

			<label for="state">State*:</label>
			<input type="text" name="state" id="state" placeholder="state" />
			<br><br>
            <div id = "error_state" style="display: none; color:red;">
                Invalid state, Please enter a valid state.
            </div>
			
            <label for="zipcode">ZipCode*:</label>
			<input type="text" name="zipcode" id="zipcode" placeholder="xxxxxx" />
			<br><br>
            <div id = "error_zipcode" style="display: none; color:red;">
                Invalid zipcode, Please enter a valid zipcode of 5 digits.
            </div>

             
            <label for="zipcode">How did you hear*:</label>
			<input type='checkbox' name="source" value="facebook" /> Facebook
            <input type='checkbox' name="source" value="google" /> Google
            <input type='checkbox' name="source" value="yelp" /> Yelp 
			<br><br>
            <div id = check style ="display: none; color:red;">
                Please select a source            
            </div>
            
            <label for="drinks">Drinks*:</label>
            <select id="drinks" onchange="validateDrink(this)">
                <option value="None" value="0">Choices</option>
                <option value="Coffee" value="1">Coffee</option>
                <option value="Tea" value="2">Tea</option>
                <option value="Sandwich" value="3">Sandwich</option>
                <option value="Chipe" value = 4>Chips</option>
            </select>
            <br><br>
            <!--<div id = "selectedCoffee"  style="display: none;">
                <label id = "selected-Coffee" for="selectCoffee">Coffee-Large(1$ Extra)</label>
                <input type="checkbox" name = "drink" value = coffee/>
            </div>
            <div id = "selectedTea"  style="display: none;">
                <label id = "selected-Tea" for="selectTea">Lemon tea-Large(1$ Extra)</label>
            </div>
            <div id = "selectedSandwich"  style="display: none;">
                <label id = "selected-Sandwich" for="selectSandwich">Chicken cheese sandwich-Large(1$ Extra)</label>
            </div>-->
            <span id = "test">
                
            </span>

            <div id = "checkboxFit" style="visibility: hidden;">
                <input type="checkbox" name="stuff" id = "Extra" onclick="addAdditionalInfo()">
            </div>

            <div id = "additionalInfo" style="display:none;">
                <label for="addIns">Add instructions:</label>
                <textarea name="text" id="Info" cols="30" rows="10">None.</textarea>
            </div>

            <br><br>
			<label for="comments">Comments*:</label>
			<textarea name="text" id="comments" placeholder="Your comments" rows="5" cols="25"></textarea>
			<br><br>
            <div id = "error_comments" style="display: none; color:red;">
                Please provide a comment or two for us to improve upon.
            </div><br><br>
			<input type="Submit">
			<input type="Reset">
			<br><br>
		 </form>
	 </main>
 </div>

 <script>
	var form = document.getElementById("myForm");
        form.addEventListener("submit", submitted);
        // initially we are setting to false 
        var validName = false;
		var validLastName = false;
        var validEmail = false;
        var validPhone = false;
        var validAddress1 = false;
        var validCity = false;
        var validState = false;
        var validZipcode = false;
        var validComment = false;

        var drinkStr = "";

        // regular expressions for name, email and phone
        var regExName = /^[a-zA-Z]+$/;
		var regLastName = /^[a-zA-Z]+$/;
        var regExEmail = /([\w\.]+)@northeastern.edu/;
        var regExPhone = /\d{3}-?\d{3}-\d{4}$/;
        var regExAddress1 = /^[a-zA-Z0-9\s,.'-]{3,}$/;
        var regExCity = /^[a-zA-Z]+$/;
        var regExState = /^[a-zA-Z]+$/;
        var regexZipcode = /^\d{5}$/;
        var regexComments = /.*/;

        //values 
        var firstName = document.getElementById("firstName");
        firstName.addEventListener("input", validate)

		var lastName = document.getElementById("lastName");
		lastName.addEventListener("input", validate)

        var emailId = document.getElementById("emailId");
        emailId.addEventListener("input", validate)

        var phoneNumber = document.getElementById("phoneNumber");
        phoneNumber.addEventListener("input", validate)

        var address1 = document.getElementById("streetAddress1");
        address1.addEventListener("input", validate)

        var city = document.getElementById("city");
        city.addEventListener("input", validate)

        var state = document.getElementById("state");
        state.addEventListener("input", validate)

        var zipcode = document.getElementById("zipcode");
        zipcode.addEventListener("input", validate)

        var comments = document.getElementById("comments");
        comments.addEventListener("input", validate)

        // write a funcyion for validate
        function validate(e){
            var value = e.target.value;
            var type = this.id; // we are getting ID of the field
            var em = "error_" + type;

            switch(type){
                case "firstName":
                    if(!value.trim().match(regExName)){
                        document.getElementById(em).style.display = "block";
                        this.style.border = "2px solid red";
                        validName = false;
                        console.log("validname", validName)
                    }
                    else{
                        document.getElementById(em).style.display = "none";
                        this.style.border = "";
                        validName = true;
                        console.log("validname", validName)
                    }
                    break;
				case "lastName":
					if(!value.trim().match(regExName)){
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validLastName = false;
						console.log("validlastname", validLastName)
					}
					else{
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validLastName = true;
						console.log("validlastname", validLastName)
					}
					break;
                case "emailId":
                    if(!value.trim().match(regExEmail)){
                        document.getElementById(em).style.display = "block";
                        this.style.border = "2px solid red";
                        validEmail = false;
                    }
                    else{
                        document.getElementById(em).style.display = "none";
                        this.style.border = "";
                        validEmail = true;
                    }
                    break;
                case "phoneNumber":
                    if(!value.trim().match(regExPhone)){
                        document.getElementById(em).style.display = "block";
                        this.style.border = "2px solid red";
                        validPhone = false;
                    }
                    else{
                        document.getElementById(em).style.display = "none";
                        this.style.border = "";
                        validPhone = true;
                    }
                    break;
                case "streetAddress1":
                    if(!value.trim() == ""){
                        document.getElementById(em).style.display = "block";
                        this.style.border = "2px solid red";
                        validAddress1 = false;
                    }else{
                        document.getElementById(em).style.display = "none";
                        this.style.border = "";
                        validAddress1 = true;
                    }
                    break;
                case "city":
                    if(!value.trim().match(regExCity)){
                        document.getElementById(em).style.display = "block";
                        this.style.border = "2px solid red";
                        validCity = false;
                    }
                    else{
                        document.getElementById(em).style.display = "none";
                        this.style.border = "";
                        validCity = true;
                    }
                    break;
                case "state":
                    if(!value.trim().match(regExState)){
                        document.getElementById(em).style.display = "block";
                        this.style.border = "2px solid red";
                        validState = false;
                    }
                    else{
                        document.getElementById(em).style.display = "none";
                        this.style.border = "";
                        validState = true;
                    }
                    break;
                case "zipcode":
                    if(!value.trim().match(regexZipcode)){
                        document.getElementById(em).style.display = "block";
                        this.style.border = "2px solid red";
                        validZipcode = false;
                    }else{
                        document.getElementById(em).style.display = "none";
                        this.style.border = "";
                        validZipcode = true;
                    }
                    break;
                
                case "comments":
                    if(value.trim()== ""){
                        document.getElementById(em).style.display = "block";
                        this.style.border = "2px solid red";
                        validComment = false;
                    }else{
                        document.getElementById(em).style.display = "none";
                        this.style.border = "";
                        validComment = true;
                    }
                    break;                
            }

        }

        function validateDrink(value){
            var selecDrin = value.options[value.selectedIndex].text;
            document.getElementById('test').innerHTML = selecDrin + " (1$ extra)";
            if(selecDrin != "Choices"){
                document.getElementById('checkboxFit').style.visibility = "visible";
                document.getElementById('test').style.visibility = "visible";
                drinkString = selecDrin;
            }else{
                document.getElementById('checkboxFit').style.visibility = "hidden";
                document.getElementById('test').style.visibility = "hidden";
                drinkString = selecDrin
            }
        }

        function radioButtonValue(){
            var val = document.getElementsByName('title');
            for (var i = 0; i < val.length; i++) {
                if (val[i].checked){
                    return val[i].value;
                }
            }
        }

        function checkbx(){
            var val = document.getElementsByName('source');
            const arr = [];
            for (var i = 0; i < val.length; i++) {
                if(val[i].checked){
                    arr[i] = val[i].value;
                }
            }return arr;
        }

        function addAdditionalInfo(){
            var check = document.getElementById('Extra');
            if (check.checked){
                document.getElementById('additionalInfo').style.display = 'block';
            }else{
                document.getElementById('additionalInfo').style.display = 'none';
            }
        }

        // write a function submitted
        function submitted(e){
            var check = document.getElementById('Extra');
            e.preventDefault();
            var title = radioButtonValue();
            const ar = checkbx();
            var strC = "";
            if(check.checked){
                strC.replace("", "Yes");
            }else{
                strC.replace("", "No");
            }
            var spanText = document.getElementById('test').innerText;
            console.log("validname", validName)
            if(validName && validLastName && validEmail && validPhone && validCity && validState && validZipcode && validComment && ar.length > 0){
                alert("Data entered succesfull"); 
                var data = {'Title':title,'FirstName':document.getElementById("firstName").value,'LastName':document.getElementById("lastName").value,'Email':document.getElementById("emailId").value, 'Phone':document.getElementById("phoneNumber").value, 'StreetAddress1':document.getElementById('streetAddress1').value, 'StreetAddress2':document.getElementById('streetAddress2').value,'City':document.getElementById("city").value, 'State':document.getElementById("state").value, 'Zipcode':document.getElementById("zipcode").value, 'Hear': ar, 'Food':spanText, 'AddiInfo':document.getElementById('Info').value, 'Comment':document.getElementById("comments").value};
                localStorage.setItem("object_name",JSON.stringify(data));
                document.getElementById("myForm").reset();
                window.location.href = "FeedbackComplete.html";
            }
            else{
                alert("Please enter valid details");
            }
        } 
 </script>
    
 </body>
</html>
